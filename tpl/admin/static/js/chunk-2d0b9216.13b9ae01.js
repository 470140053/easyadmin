(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b9216"],{3245:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-timeline",[e._l(e.tableData,(function(t,a){return[n("el-timeline-item",{key:a,attrs:{timestamp:t.create_time_text,type:"success",size:"large",icon:"fast-icon-feed-logo",placement:"top"}},[n("el-card",[n("h4",[e._v("V "+e._s(t.version_no)+" - "+e._s(t.title)+" "),1==t.is_pay?n("span",{staticStyle:{color:"#e74c3c"}},[e._v("[需支付：￥"+e._s(t.money)+"元]")]):n("span",{staticStyle:{color:"#18bc9c"}},[e._v("[免费]")]),n("span",{staticStyle:{float:"right"}},[1==t.is_pay?n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return e.hanledPayment(t)}}},[e._v("安装")]):n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return e.hanledInstall(t)}}},[e._v("安装")])],1)]),n("p",[e._v("要求EasyAdmin版本必须在 "),n("span",{staticStyle:{color:"#18bc9c"}},[e._v(e._s(t.version_id))]),e._v(" 之上")]),n("p",[e._v("支持平台："+e._s(t.platform_text.join(" / ")))]),n("div",[n("p",[e._v("更新说明：")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10},disabled:"",readonly:""},model:{value:t.note,callback:function(n){e.$set(t,"note",n)},expression:"item.note"}})],1)])],1)]}))],2),n("el-dialog",{attrs:{title:"支付信息",visible:e.paymentVisible,"append-to-body":"",width:"30%","before-close":function(){return e.paymentVisible=!1}},on:{"update:visible":function(t){e.paymentVisible=t}}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"text item"},[n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"微信支付",name:"wechat"}},[n("div",{staticStyle:{margin:"20px auto",width:"220px",height:"220px"}},[n("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.payInfo.wechat_url}})],1),e.payInfo["down_time"]?n("div",{staticStyle:{"text-align":"center",margin:"20px 0px"}},[n("el-tag",{attrs:{size:"mini"}},[e._v(" 剩余:"),n("count-down",{key:Math.random(),attrs:{endTime:1e3*e.payInfo["down_time"]},on:{"on-end":e.endtimeEvent}})],1)],1):e._e()]),n("el-tab-pane",{attrs:{label:"支付宝支付",name:"alipay"}},[n("div",{staticStyle:{margin:"20px auto",width:"220px",height:"220px"}},[n("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.payInfo.alipay_url}})],1),e.payInfo["down_time"]?n("div",{staticStyle:{"text-align":"center",margin:"20px 0px"}},[n("el-tag",{attrs:{size:"mini"}},[e._v(" 剩余:"),n("count-down",{key:Math.random(),attrs:{endTime:1e3*e.payInfo["down_time"]},on:{"on-end":e.endtimeEvent}})],1)],1):e._e()])],1)],1),n("div",{staticStyle:{"text-align":"center"}},[n("span",{staticStyle:{margin:"0 15px",color:"#e74c3c","font-weight":"bold"}},[e._v("需支付：￥"+e._s(e.payInfo.total_money)+"元")]),n("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.hanledInstall}},[e._v("确认已扫码支付")])],1)])],1)],1)},i=[],s=(n("e18c"),n("6a61"),n("cf7f")),o=n("ab3e"),c=n("fa7d"),r=n("7cb7"),l={components:{CountDown:function(){return Promise.resolve().then(n.bind(null,"afd5"))}},props:{detail:{type:Object,default:function(){return{}}}},data:function(){return{tableData:[],indexUrl:"/api/plug/getPlugVersionList",ercodeUrl:"/api/payment/getPayErcode",paymentVisible:!1,activeName:"wechat",payInfo:{}}},mounted:function(){this.init()},methods:{init:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c["a"].cacheGet("addonappstr")){t.next=2;break}return t.abrupt("return",!1);case 2:n=e,a={id:e.detail.id,token:e.detail.token},Object(o["a"])(e.indexUrl,a,(function(e){200==e.code&&(0===e.data.list.length&&(n.$message({message:"没有可安装升级的版本",type:"info",duration:5e3}),n.$emit("click",{})),n.tableData=e.data.list)}));case 5:case"end":return t.stop()}}),t)})))()},hanledInstall:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={name:t.detail.alias,force:!0,id:e.id,token:e.token,version:e.version_no,addons_str:c["a"].cacheGet("addonappstr")},n.next=3,Object(r["c"])(a);case 3:i=n.sent,200==i.code&&(t.$message({message:i.msg,type:"success",duration:5e3}),t.$emit("refresh",{}));case 5:case"end":return n.stop()}}),n)})))()},hanledPayment:function(e){var t=this,n={id:e.id,token:e.token,pay_type:this.activeName};Object(o["a"])(this.ercodeUrl,n,(function(e){200==e.code&&(t.payInfo=e.data.info,t.paymentVisible=!0)}))},endtimeEvent:function(){this.paymentVisible=!1}}},d=l,p=n("9ca4"),u=Object(p["a"])(d,a,i,!1,null,null,null);t["default"]=u.exports}}]);