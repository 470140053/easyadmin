(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70bb9d6d"],{"0f7e":function(t,e,n){"use strict";var i=n("b89e"),a=n.n(i);a.a},"18a9":function(t,e,n){},"1d13":function(t,e,n){"use strict";var i=n("bf06"),a=n.n(i);a.a},2493:function(t,e,n){"use strict";var i=n("bd3b"),a=n.n(i);a.a},2892:function(t,e,n){"use strict";var i=n("c088"),a=n.n(i);a.a},"30fd":function(t,e,n){"use strict";var i=n("bf9a"),a=n.n(i);a.a},3804:function(t,e,n){var i=n("b6b5"),a=function(){return i.Date.now()};t.exports=a},"39b7":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"editorWarp",on:{contextmenu:function(t){t.preventDefault(),t.stopPropagation()}}},[n("Myheader",{attrs:{"layout-data":t.layoutData}}),t.layoutData?n("ui-dock",{attrs:{info:t.layoutData}}):t._e()],1)])},a=[],o=(n("e18c"),n("e35a"),n("0d7a"),n("af86"),n("6a61"),n("cf7f")),r=n("e793"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-bar-wrapper header"},[n("div",{staticClass:"main-top-bar top-bar-lang-en"},[n("div",{staticClass:"top-bar-left-section"},[t._m(0),n("div",{staticClass:"top-menus"},[n("el-dropdown",{staticStyle:{"margin-left":"20px"},attrs:{trigger:"click"},on:{command:t.selectLayout}},[n("el-button",{attrs:{type:"text"}},[t._v(" 布局"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.layouts,(function(e){return n("el-dropdown-item",{key:e.type,attrs:{command:e.type}},[t._v(t._s(e.name)+" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.currentLayout==e.type,expression:"currentLayout == view.type"}],staticClass:"el-icon-check",staticStyle:{color:"#faad14"}})])})),1)],1)],1)]),n("div",{staticClass:"top-bar-center-section"}),n("div",{staticClass:"top-bar-right-section"},[n("button",{staticClass:"top-bar-btn top-bar-button-preview",on:{click:t.saveToServer}},[t._m(1)])])]),n("el-popover",{ref:"popover4",attrs:{placement:"right",width:"180",trigger:"click"}},[n("el-form",{attrs:{model:t.Setting,size:"mini","label-width":"90px"}},[n("el-form-item",{attrs:{label:"智能参考线"}},[n("el-switch",{attrs:{value:t.Setting.line},on:{change:function(e){return t.onSettingChange(e,"line")}}})],1),n("el-form-item",{attrs:{label:"参考线颜色"}},[n("el-color-picker",{attrs:{value:t.Setting.color},on:{change:function(e){return t.onSettingChange(e,"color")}}})],1),n("el-form-item",{attrs:{label:"吸附效果"}},[n("el-switch",{attrs:{value:t.Setting.sorb},on:{change:function(e){return t.onSettingChange(e,"sorb")}}})],1)],1)],1),n("el-dialog",{attrs:{title:"接口数据",visible:t.dialogApiTplVisible},on:{"update:visible":function(e){t.dialogApiTplVisible=e}}},[n("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataFormRule}},[n("el-form-item",{attrs:{label:"模板名称","label-width":t.formLabelWidth,prop:"title"}},[n("el-input",{attrs:{autocomplete:"off"},on:{change:t.getAlias},model:{value:t.dataForm.title,callback:function(e){t.$set(t.dataForm,"title",e)},expression:"dataForm.title"}})],1),n("el-form-item",{attrs:{label:"模板别名","label-width":t.formLabelWidth,prop:"alias"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.dataForm.alias,callback:function(e){t.$set(t.dataForm,"alias",e)},expression:"dataForm.alias"}})],1),n("el-form-item",{attrs:{label:"请求数据接口","label-width":t.formLabelWidth,prop:"index_url"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.dataForm.index_url,callback:function(e){t.$set(t.dataForm,"index_url",e)},expression:"dataForm.index_url"}})],1),n("el-form-item",{attrs:{label:"提交数据接口","label-width":t.formLabelWidth,prop:"ajax_url"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.dataForm.ajax_url,callback:function(e){t.$set(t.dataForm,"ajax_url",e)},expression:"dataForm.ajax_url"}})],1),n("el-form-item",{attrs:{label:"备注说明","label-width":t.formLabelWidth,prop:"note"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.dataForm.note,callback:function(e){t.$set(t.dataForm,"note",e)},expression:"dataForm.note"}})],1),n("el-form-item",{attrs:{label:"页面类型","label-width":t.formLabelWidth,prop:"template_type"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.template_type,callback:function(e){t.$set(t.dataForm,"template_type",e)},expression:"dataForm.template_type"}},[n("el-option",{attrs:{label:"treeTable",value:"tree"}}),n("el-option",{attrs:{label:"分页Table",value:"table"}}),n("el-option",{attrs:{label:"表单",value:"form"}})],1)],1),n("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth,prop:"status"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},[n("el-option",{attrs:{label:"禁用",value:"0"}}),n("el-option",{attrs:{label:"启用",value:"1"}})],1)],1),n("el-form-item",{attrs:{label:"是否显示底部","label-width":t.formLabelWidth,prop:"status"}},[n("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:t.dataForm.is_footer,callback:function(e){t.$set(t.dataForm,"is_footer",e)},expression:"dataForm.is_footer"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogApiTplVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确 定")])],1)],1)],1)},l=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"top-bar-logo"},[i("img",{staticClass:"logo",attrs:{src:n("9d64")}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"label"},[t._v(" 保存 "),n("i",{staticClass:"iconfont icon-save"})])}],c=n("ce3c"),d=n("5d57"),u=n("a7fe"),p=n("52c1"),f=n("50c1"),h=n("3e0a"),g={mixins:[d["a"]],components:{},name:"Myheader",props:["layout-data"],data:function(){return{dialogApiTplVisible:!1,formLabelWidth:"120px",dataForm:{title:"",alias:"",template_type:"form",index_url:"",ajax_url:"",template_content:[],status:"1",is_footer:!1},dataFormRule:{title:[{required:!0,message:"请输入模板名称",trigger:["blur","change"]}],alias:[{required:!0,message:"请输入模板别名",trigger:["blur","change"]}],template_content:[{required:!0,message:"你还没有创建页面模板",trigger:["blur","change"]}]},setting:{open:!0,line:!0,color:"#409EFF",phoneline:!0,sorb:!0}}},computed:Object(r["a"])({},Object(p["c"])({widgets:function(t){return t.viewOption.widgets},layouts:function(t){return t.viewOption.layouts},currentLayout:function(t){return t.viewOption.currentLayout},fields:function(t){return t.fields},tableField:function(t){return t.tableField},leftButtonField:function(t){return t.leftButtonField},rightButtonField:function(t){return t.rightButtonField},subFromField:function(t){return t.subFromField}})),mounted:function(){},methods:{onSettingChange:function(t,e){this.$store.dispatch("SettingChange",Object(c["a"])({},e,t))},onToolCommand:function(t){switch(t){case"allToPx":this.ema.fire("allToPx");break}},publish:function(){},getAlias:function(){return this.dataForm.alias=h["a"].chineseToPinYin(this.dataForm.title),!1},saveToServer:function(){var t=this.$route.query.types,e=this.fields,n="addTabsField";if(2==t){n="addTableField";var i={searchForm:this.fields,table:this.tableField,leftButton:this.leftButtonField,rightButton:this.rightButtonField};e=i,this.dataForm.template_type="table"}"{}"!=JSON.stringify(this.subFromField)&&(this.dataForm=JSON.parse(JSON.stringify(this.subFromField)),this.$store.commit(n,{})),this.dataForm.template_content=e,console.log(this.dataForm),this.dialogApiTplVisible=!0},updateData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$refs.dataForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=11;break}if(!t.dataForm.id){e.next=7;break}return e.next=4,Object(f["b"])(t.dataForm);case 4:i=e.sent,e.next=10;break;case 7:return e.next=9,Object(f["a"])(t.dataForm);case 9:i=e.sent;case 10:i&&200==i.code&&(t.dialogApiTplVisible=!1,t.$message({message:i.msg,type:"success"}),t.$router.go(0));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},selectLayout:function(t){this.$store.dispatch("setCurrentLayout",t)},preview:function(){},revocation:function(){this.ema.fire("history.back")},forward:function(){this.ema.fire("history.forword")},save:function(){this.ema.fire("pageInfo.save")},psd:function(){this.ema.fire("pageInfo.psd")},postData:function(t){var e=window.localStorage.getItem("EditorautoSave_tmp");t.postMessage({type:"preview",content:e,canvas:this.$store.state.setting.phoneSize},"*")}}},m=g,b=(n("ad95"),n("9ca4")),v=Object(b["a"])(m,s,l,!1,null,"33865bc6",null),y=v.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-dock-main",on:{mouseup:function(e){return t.mouseup(e)},mousemove:function(e){return t.mousemove(e)}}},[n("main-dock",{attrs:{info:t.info.layout,level:10}}),t._l(t.info.dialogs,(function(e,i){return n("dialogone",{key:(e.component||"main")+i,attrs:{info:e}},[e&&e.children?n("main-dock",{attrs:{info:e,level:11}}):t._e()],1)})),t._l(t.onedialogs,(function(t,e){return n("dialogone",{key:t.component+e,attrs:{info:t}})})),t.showMask?n("div",{staticClass:"dock-mask dock",style:t.maskStyle}):t._e()],2)},x=[],k=(n("fe59"),n("ecb4"),n("ea69"),n("5e9f"),n("08ba"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-dock",class:[t.info.type,t.showMask?"showMask":""],style:{flex:t.info.flex||1,"z-index":t.level}},[t._l(t.info.children,(function(e,i){return["panel"==e.type?n("panel",{key:"panel"+i,attrs:{info:e,level:t.level+1}}):n("dock-main",{key:"main"+i,attrs:{info:e,level:t.level+1}}),i!=t.info.children.length-1?n("resizer",{key:"resize"+i,class:[t.info.type],attrs:{type:t.info.type,level:t.level+1}}):t._e()]})),t.showMask&&1!=t.info.children.length?n("div",{staticClass:"mask top",style:{"z-index":t.level},on:{dragover:function(e){return t.dragover(e)},drop:function(e){return t.drop(e)},dragleave:function(e){return t.dragleave(e)},dragenter:function(e){return t.dragenter(e)}}},[t._v("1")]):t._e(),t.showMask&&1!=t.info.children.length?n("div",{staticClass:"mask left",style:{"z-index":t.level},on:{dragover:function(e){return t.dragover(e)},drop:function(e){return t.drop(e)},dragleave:function(e){return t.dragleave(e)},dragenter:function(e){return t.dragenter(e)}}},[t._v("2")]):t._e(),t.showMask&&1!=t.info.children.length?n("div",{staticClass:"mask right",style:{"z-index":t.level},on:{dragover:function(e){return t.dragover(e)},drop:function(e){return t.drop(e)},dragleave:function(e){return t.dragleave(e)},dragenter:function(e){return t.dragenter(e)}}},[t._v("3")]):t._e(),t.showMask&&1!=t.info.children.length?n("div",{staticClass:"mask bottom",style:{"z-index":t.level},on:{dragover:function(e){return t.dragover(e)},drop:function(e){return t.drop(e)},dragleave:function(e){return t.dragleave(e)},dragenter:function(e){return t.dragenter(e)}}},[t._v("4")]):t._e()],2)}),S=[],j=(n("4194"),n("513c"),{name:"node",data:function(t){return{showMask:!1,dragPanel:null}},watch:{},mounted:function(){var t=this;this.ema.bind("dock.panelTitleDragStart",(function(e,n){t.showMask=!0,t.dragPanel=e,t.dragInfo=n})),this.ema.bind("dock.panelTitleDragEnd",(function(e){t.showMask=!1}))},methods:{dragover:function(t){t.stopPropagation(),t.preventDefault()},dragleave:function(t){t.stopPropagation(),t.preventDefault(),this.ema.fire("dock.maskDragleave")},dragenter:function(t){t.stopPropagation(),this.ema.fire("dock.maskDragenter",t,this)},drop:function(t){t.stopPropagation(),t.preventDefault(),this.ema.fire("dock.panelTitleDrop",t),this.showMask=!1}}}),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-dock-panel",class:{showMask:t.showMask},style:{flex:t.info.flex||1,"z-index":t.level},attrs:{tabindex:"0"},on:{keydown:function(e){return t.keydown(e)},keyup:function(e){return t.keydown(e)},"!click":function(e){return t.panelSelect(e)}}},[n("el-tabs",{staticClass:"border-card",class:{active:t.active},attrs:{type:"border-card"},model:{value:t.editableTabsValue,callback:function(e){t.editableTabsValue=e},expression:"editableTabsValue"}},t._l(t.info.children,(function(e){return n("el-tab-pane",{key:e.component,staticClass:"tab-panel",attrs:{name:e.component}},[n("span",{staticClass:"tab-label",attrs:{slot:"label",draggable:"true"},on:{dragstart:function(n){return t.dragstart(n,e)},dragend:function(n){return t.dragend(n,e)}},slot:"label"},[n("i",{staticClass:"el-icon-date"}),t._v(" "+t._s(t._f("get_title")(e.name,e.component,t.canDragType)))]),e.component?n(e.component,{tag:"component",attrs:{active:t.editableTabsValue==e.component}}):t._e()],1)})),1),t.showMask&&t.canDragIn?n("div",{staticClass:"mask top",style:{"z-index":t.level},on:{dragover:function(e){return t.dragover(e)},drop:function(e){return t.drop(e)},dragleave:function(e){return t.dragleave(e)},dragenter:function(e){return t.dragenter(e)}}}):t._e(),t.showMask&&t.canDragIn?n("div",{staticClass:"mask left",style:{"z-index":t.level},on:{dragover:function(e){return t.dragover(e)},drop:function(e){return t.drop(e)},dragleave:function(e){return t.dragleave(e)},dragenter:function(e){return t.dragenter(e)}}}):t._e(),t.showMask&&t.canDragIn?n("div",{staticClass:"mask right",style:{"z-index":t.level},on:{dragover:function(e){return t.dragover(e)},drop:function(e){return t.drop(e)},dragleave:function(e){return t.dragleave(e)},dragenter:function(e){return t.dragenter(e)}}}):t._e(),t.showMask&&t.canDragIn?n("div",{staticClass:"mask bottom",style:{"z-index":t.level},on:{dragover:function(e){return t.dragover(e)},drop:function(e){return t.drop(e)},dragleave:function(e){return t.dragleave(e)},dragenter:function(e){return t.dragenter(e)}}}):t._e(),t.showMask?n("div",{staticClass:"mask header",style:{"z-index":t.level},on:{dragover:function(e){return t.dragover(e)},drop:function(e){return t.dropHeader(e)},dragleave:function(e){return t.dragleave(e)},dragenter:function(e){return t.dragenter(e)}}}):t._e()],1)},F=[],_=(n("dbb3"),n("b130"),n("2eeb"),n("90aa"),n("e7e5")),P=n.n(_),$={mixins:[d["a"],j],name:"dockPanel",components:{},filters:{get_title:function(t,e,n){switch(e){case"widgetScene":return 1==n?"表单":"列表";default:return t}}},props:{info:{required:!0,type:Object},level:{type:Number}},data:function(){return{active:!1,isDraging:!1,editableTabsValue:"",selectPanel:null}},watch:{editableTabsValue:function(t){var e=this.info.children.filter((function(e){return e.component==t}));this.selectPanel=e&&e[0]},currentLayout:function(t){setTimeout(this.activeFirst,100)},activeIsValid:function(t){t||this.activeFirst()}},computed:{canDragType:function(){return this.$route.query.types},canDragIn:function(t){return this.isDraging&&1==this.info.children.length},currentLayout:function(){return this.$store.state.viewOption.currentLayout},childrenComponent:function(){return this.info.children.map((function(t){return t&&t.component}))},activeIsValid:function(){return this.childrenComponent.includes(this.editableTabsValue)}},mounted:function(){var t=this;this.activeFirst(),this.ema.bind("dock.panelUnActive",(function(e){t.active=!1})),this.ema.bind("dock.panelActive",(function(e){t.info.children.forEach((function(n){e==n.component&&(t.editableTabsValue=e)}))}))},methods:{activeFirst:function(){var t=this.info.children&&this.info.children[0];this.editableTabsValue=t.component},keydown:function(t){this.active&&(t.panelName=this.selectPanel.component)},panelSelect:function(t){this.active=!0},dragend:function(t){this.isDraging=!1,this.ema.fire("dock.panelTitleDragEnd",t)},dragstart:function(t,e){this.isDraging=!0,t.stopPropagation(),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(t.target,t.offsetX,t.offsetY),this.ema.fire("dock.panelTitleDragStart",this,e)},removeOne:function(t){var e=this,n=t||this.info.children.find((function(t,n){if(t.component==e.editableTabsValue)return!0}));return this.info.children.splice(this.info.children.indexOf(n),1),this.info.children.length>0?this.editableTabsValue=this.info.children[0].component:this.$parent&&this.$parent.removePanel&&this.$parent.removePanel(this.info),n},dropHeader:function(t){var e=this,n=this.info.children.find((function(t,n){if(t.component==e.dragInfo.component)return!0}));n||(this.info.children.push(P()(this.dragInfo)),this.dragPanel.removeOne(this.dragInfo),this.editableTabsValue=this.dragInfo.component),this.ema.fire("dock.panelTitleHeaderDrop",t),this.showMask=!1}}},T=$,C=(n("0f7e"),n("1d13"),Object(b["a"])(T,O,F,!1,null,"76a67a84",null)),M=C.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-dock-resizer",class:{active:t.active},style:{"z-index":t.level},on:{mousedown:function(e){return t.mousedown(e)}}},[n("div",{staticClass:"bar"})])},D=[],E={mixins:[d["a"]],name:"dockResizer",components:{},props:{type:{type:String},info:{type:Object},level:{type:Number}},data:function(){return{move:{start:{x:0,y:0},end:{x:0,y:0}},active:!1}},watch:{},computed:{},mounted:function(){var t=this;this.ema.bind("dock-mouseup",(function(){t.active&&t.$parent.mouseup(),t.active=!1})),this.ema.bind("dock-mousemove",(function(e){t.active&&(t.move.end={x:e.pageX,y:e.pageY},t.$parent.doMove(t,{x:t.move.start.x-t.move.end.x,y:t.move.start.y-t.move.end.y}))}))},methods:{mousedown:function(t){this.move.start={x:t.pageX,y:t.pageY},this.active=!0,this.active&&this.$parent.mousedown(this)}}},B=E,z=(n("2493"),Object(b["a"])(B,A,D,!1,null,"274cf99e",null)),I=z.exports,N={mixins:[d["a"],j],name:"dockMain",components:{Panel:M,Resizer:I},props:{info:{required:!0,type:Object},level:{type:Number}},data:function(){return{boxSize:{width:0,iwidth:0,height:0,iheight:0},resizerSize:3}},watch:{},mounted:function(){this.initBounding()},methods:{removePanel:function(t){this.info.children.splice(this.info.children.indexOf(t),1),this.info.children.length>0?this.info.children[0].flex+=t.flex:this.$parent&&this.$parent.removePanel&&this.$parent.removePanel(this.info)},getBrother:function(t){var e=0,n=this.$children;n.find((function(n,i){if(n==t)return e=i,!0})),e&&(this.preBrother=n[e-1],this.nextBrother=n[e+1])},initBounding:function(){var t=this.$el.getBoundingClientRect(),e=this.$children.length;this.boxSize.width=t.width,this.boxSize.iwidth=t.width-Math.floor(e/2)*this.resizerSize,this.boxSize.height=t.height,this.boxSize.iheight=t.height-Math.floor(e/2)*this.resizerSize},doMove:function(t,e){var n="row"==this.info.type?"x":"y",i=parseFloat(this.preFlex-e[n]),a=parseFloat(this.nextFlex+e[n]);this.preBrother&&this.nextBrother&&(this.preBrother.info.flex=i+"px",this.nextBrother.info.flex=a+"px")},mouseup:function(){var t=this;this.initBounding();var e="row"==this.info.type?"width":"height",n=this.boxSize["i"+e];this.info.children.forEach((function(e){t.$set(e,"flex",parseFloat(e.flex)/n)}))},dealPx:function(){var t=this,e="row"==this.info.type?"width":"height",n=this.boxSize["i"+e],i=this.info.children.find((function(t){if(-1!=(t.flex+"").indexOf("px"))return!0}));i&&this.info.children.forEach((function(e){e.flex=1/t.info.children.length})),this.info.children.forEach((function(e){t.$set(e,"flex",e.flex*n+"px")}))},dealPrecent:function(){var t=this,e="row"==this.info.type?"width":"height",n=0;this.info.children.forEach((function(t){n+=t[e]})),this.info.children.forEach((function(i){t.$set(i,"flex",i[e]/n)}))},mousedown:function(t){this.getBrother(t),this.initBounding(),this.dealPx(),this.preBrother&&this.nextBrother&&(this.preFlex=parseFloat(this.preBrother.info.flex),this.nextFlex=parseFloat(this.nextBrother.info.flex))}}},L=N,R=(n("e438"),Object(b["a"])(L,k,S,!1,null,"bf0d82ce",null)),V=R.exports,W=function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"ui-dock-dialog comp-panel-frame animation-panel",class:(t={moving:e.active,"for-main-dock":e.isForMainDock},t[e.dockedPos]=!0,t),style:e.info.style,on:{"!mousedown":function(t){return e.captureMousedown(t)}}},[e.isForMainDock?e._e():i("header",{staticClass:"panel-header dragger dark",on:{mousedown:function(t){return e.mousedown(t)}}},[i("div",{staticClass:"panel-header-title"},[i("div",{staticClass:"panel-header-title-content"},[i("span",{staticClass:"panel-header-label",attrs:{draggable:"true"},on:{dragstart:function(t){return e.dragstart(t,e.info)},dragend:function(t){return e.dragend(t,e.info)}}},[i("i",{staticClass:"iconfont icon-dragvertical"}),e._v(" "+e._s(e.info.name))])])])]),i("div",{staticClass:"tools",class:[e.labelRight?"label-right":"label-left"],on:{mousedown:function(t){return e.mousedown(t)}}},[i("div",{staticClass:"tools-inner"},[i("div",{staticClass:"btnWarp"},[i("i",{staticClass:"el-icon-close btn",staticStyle:{"font-weight":"bolder"},on:{mousedown:function(t){t.stopPropagation()},click:function(t){return t.stopPropagation(),e.close(t)}}})]),"right-stick"===e.dockedPos||"right-normal"===e.dockedPos||"left-end"===e.dockedPos?i("div",{staticClass:"btnWarp"},[i("i",{staticClass:"iconfont icon-double-right-filled btn",on:{mousedown:function(t){t.stopPropagation()},click:function(t){return t.stopPropagation(),e.autoFold()}}})]):e._e(),"left-stick"===e.dockedPos||"left-normal"===e.dockedPos||"right-end"===e.dockedPos?i("div",{staticClass:"btnWarp"},[i("i",{staticClass:"iconfont icon-double-left-filled btn",on:{mousedown:function(t){t.stopPropagation()},click:function(t){return t.stopPropagation(),e.autoFold()}}})]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.dockedPos.includes("end"),expression:"dockedPos.includes('end')"}],staticClass:"panel-names"},e._l(e.pannelNames,(function(t,n){return i("div",{key:n,staticClass:"panel-names-item"},[e._v(e._s(t))])})),0)])]),i("div",{staticClass:"content"},[e._t("default",[e.info.component?i(e.info.component,e._b({tag:"component",staticClass:"width100"},"component",e.info.props,!1)):e._e()])],2),i("div",{staticClass:"resize",on:{mousedown:function(t){return e.resizerMousedown(t)}}})])},q=[],J=(n("053b"),n("84c2"),n("1c2e"),n("f4e3"),n("708e")),U=n.n(J),X=n("edd1"),Y=n.n(X),H={mixins:[d["a"]],name:"dockDialog",components:{},props:{info:{required:!0,type:Object}},data:function(){return{startPos:{left:0,top:0},move:{start:{x:0,y:0},end:{x:0,y:0}},active:!1,dockedPos:""}},watch:{"info.children.length":{handler:function(t){0===t&&this.close()},immediate:!0}},computed:{isForMainDock:function(){return this.info&&this.info.children instanceof Array},labelRight:function(){return this.dockedPos.includes("left")},pannelNames:function(){return(JSON.stringify(this.info).match(/"name":[^,}]+/g)||[]).map((function(t){return t.replace(/[":]|name/g,"")}))}},mounted:function(){var t=this;this.$nextTick((function(){return t.calcPos()})),this.debouncedCalcPos=Y()(this.calcPos,200),this.$watch("info.style.left",this.debouncedCalcPos),window.addEventListener("resize",this.debouncedCalcPos),this.ema.bind("dock-mouseup",(function(){t.active=!1,t.resizerActive=!1})),this.ema.bind("dock-mousemove",(function(e){(t.active||t.resizerActive)&&(t.move.end={x:e.pageX,y:e.pageY},t.doMove({x:t.move.start.x-t.move.end.x,y:t.move.start.y-t.move.end.y}))}))},beforeDestroy:function(){window.removeEventListener("resize",this.debouncedCalcPos)},methods:{captureMousedown:function(t){t.target&&t.target.classList.contains("el-tabs__nav-scroll")&&(this.mousedown(t),t.stopPropagation())},calcPos:function(){console.log("calcPos",this.info.name);var t,e=this.getRect(),n=(getComputedStyle(this.$el).transform.match(/\((.+)\)/)||["",""])[1].split(/[,\s]+/),i=n&&+n[4]||0,a=e.left;t=a>=window.innerWidth-.5*e.width?"right-end":a>=window.innerWidth-e.width?"right-stick":a>=.5*window.innerWidth-.5*e.width?"right-normal":a>0?"left-normal":a>-.5*e.width?"left-stick":"left-end","left-stick"===t&&Math.abs(i-e.width)<=.001&&(t="left-end"),"right-stick"===t&&Math.abs(i+e.width)<=.001&&(t="right-end"),t.includes("normal")&&Math.abs(i)>.001&&(this.info.style.left=a+"px"),this.setAutoPos(t,this.dockedPos)},autoFold:function(){var t;switch(this.dockedPos){case"left-end":t="left-stick";break;case"left-stick":t="left-end";break;case"left-normal":t="left-stick";break;case"right-end":t="right-stick";break;case"right-stick":t="right-end";break;case"right-normal":t="right-stick";break}console.log(t),this.dockedPos=t,this.setAutoPos(t)},getRect:function(){return this.$el.getBoundingClientRect()},removeOne:function(t){this.close()},dragend:function(t){this.ema.fire("dock.panelTitleDragEnd",t)},dragstart:function(t,e){t.stopPropagation(),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(t.target,t.offsetX,t.offsetY),this.ema.fire("dock.panelTitleDragStart",this,this.info)},close:function(t){this.ema&&this.ema.fire("dock.dialogClose",this.info)},setAutoPos:function(t,e){console.log("setAutoPos",t,e),this.dockedPos=t;var n=this.calcLeft(t);null!==n?(this.updateTopsAndIndex(t),this.info.style.left=n+"px"):e&&/normal/.test(t)&&t!==e&&this.updateTopsAndIndex(e),this.info.style.width=Math.max(300,Math.min(window.innerWidth-100,parseFloat(this.info.style.width))||350)+"px",this.info.style.height=Math.max(400,Math.min(window.innerHeight-100,parseFloat(this.info.style.height))||500)+"px"},updateTopsAndIndex:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e=(e.split("-")||[])[0],["left","right"].includes(e)){var n,i=new RegExp("".concat(e,"-(end|stick)")),a=this.$parent.$children.filter((function(e){return e.$options.name===t.$options.name&&i.test(e.dockedPos)}));a.map((function(t,e){var i=135,a=e*i+75;a>window.innerHeight-1*i&&(a=n+34);var o=window.parseFloat(t.info.style.top)-window.parseFloat(a);Math.abs(o)>.1&&(t.$el.addEventListener("transitionend",(function e(){t.$el.removeEventListener("transitionend",e),t.$delete(t.info.style,"transition")})),t.info.style.transition="top ".concat(50*Math.pow(Math.abs(o),.3),"ms linear")),n=a,t.info.style.top=a+"px"}))}},calcLeft:function(t){var e=this.getRect(),n=null;switch(t){case"right-end":n=window.innerWidth;break;case"right-stick":n=window.innerWidth-e.width;break;case"left-end":n=-e.width;break;case"left-stick":n=0;break}return n},doMove:U()((function(t){var e={};this.active&&(e={left:this.startPos.left-t.x,top:this.startPos.top-t.y},this.info.style.left=e.left+"px",this.info.style.top=e.top+"px"),this.resizerActive&&(e={width:Math.max(this.startPos.width-t.x,300),height:Math.max(this.startPos.height-t.y,400)},this.info.style.width=e.width+"px",this.info.style.height=e.height+"px")}),17),mousedown:function(t){this.startPos={left:parseFloat(this.info.style.left),top:parseFloat(this.info.style.top),width:parseFloat(this.info.style.width),height:parseFloat(this.info.style.height)},this.move.start={x:t.pageX,y:t.pageY},this.active=!0},resizerMousedown:function(t){this.startPos={left:parseFloat(this.info.style.left),top:parseFloat(this.info.style.top),width:parseFloat(this.info.style.width),height:parseFloat(this.info.style.height)},this.move.start={x:t.pageX,y:t.pageY},this.resizerActive=!0}}},K=H,Z=(n("f24d"),Object(b["a"])(K,W,q,!1,null,"410a62e8",null)),G=Z.exports,Q={mixins:[d["a"]],name:"dock",components:{MainDock:V,dialogone:G},props:{info:{required:!0,type:Object}},data:function(){return{showMask:!1,DragInfo:null,DragDirection:"",boxSize:{},onedialogs:[],maskStyle:{left:0,width:0,top:0,right:0}}},watch:{info:{deep:!0,handler:function(t,e){t!==e||this.saveLayout()}}},computed:Object(p["c"])({currentLayout:function(t){return t.viewOption.currentLayout}}),mounted:function(){var t=this;this.ema.bind("dock.dialogClose",(function(e){t.info.dialogs.splice(t.info.dialogs.indexOf(e),1)})),this.ema.bind("dock.dialogPush",(function(e){t.info.dialogs.push(e)})),this.ema.bind("dock.onceDialogClose",(function(e){t.onedialogs.splice(t.onedialogs.indexOf(e),1)})),this.ema.bind("dock.onceDialogPush",(function(e){t.onedialogs.push(e)})),this.ema.bind("dock.maskDragenter",(function(e,n){t.dealMask(e,n)})),this.ema.bind("dock.panelTitleDragStart",(function(e,n){t.DragInfo={target:e,data:n}})),this.ema.bind("dock.maskDragleave",(function(t,e){})),this.ema.bind("dock.panelTitleDragEnd",(function(e,n){t.showMask=!1,t.targetPanel=null})),this.ema.bind("dock.panelTitleHeaderDrop",(function(e,n){t.showMask=!1,t.targetPanel=null})),this.ema.bind("dock.panelTitleDrop",(function(e,n){t.showMask&&t.movePanel(),t.showMask=!1,t.targetPanel=null})),this.boxSize=this.$el.getBoundingClientRect()},methods:{movePanel:function(){var t=this;if(this.targetPanel){var e=this.targetPanel.$parent.info,n=e.children,i=this.DragInfo;i.target.removeOne(i.data);var a=P()(i.data),o="row";if(n){o="top"==this.DragDirection||"bottom"==this.DragDirection?"column":"row";var r=n.indexOf(this.targetPanel.info);if("top"==this.DragDirection||"left"==this.DragDirection?(r-=1,r<0&&(r=0)):r+=1,1==n.length&&(e.type=o),"panel"==this.targetPanel.info.type){var s=[P()(this.targetPanel.info)];s.splice(r,0,{children:[{children:[a],type:"panel"}],flex:.5,type:"column"}),s.forEach((function(t){t.flex=1/s.length})),this.targetPanel.info.children=s,this.targetPanel.info.type=o,this.targetPanel.$parent.info.children.forEach((function(e){e.flex=1/t.targetPanel.$parent.info.children.length}))}else n.splice(r,0,{children:[{children:[a],type:"panel"}],flex:.5,type:"column"}),n.forEach((function(t){t.flex=1/n.length}))}}},dealMask:function(t,e){var n=this.boxSize,i=t.target.className.replace("mask ",""),a=e.$el.getBoundingClientRect();this.targetPanel=e;var o=e.$parent.info.type;o&&(this.showMask=!0,"left"==i?this.maskStyle={left:a.left-n.left+"px",top:a.top-n.top+"px",width:a.width/2+"px",height:a.height+"px"}:"right"==i?this.maskStyle={left:a.left+a.width/2-n.left+"px",top:a.top-n.top+"px",width:a.width/2+"px",height:a.height+"px"}:"top"==i?this.maskStyle={top:a.top-n.top+"px",left:a.left-n.left+"px",width:a.width+"px",height:a.height/2+"px"}:"bottom"==i?this.maskStyle={top:a.top+a.height/2-n.top+"px",left:a.left-n.left+"px",width:a.width+"px",height:a.height/2+"px"}:"header"==i&&(a=t.target.getBoundingClientRect(),this.maskStyle={top:a.top-n.top+"px",left:a.left-n.left+"px",width:a.width+"px",height:a.height+"px"}),this.DragDirection=i)},saveLayout:function(){var t=this,e=this;this.saveTimer&&clearTimeout(this.saveTimer),this.saveTimer=setTimeout((function(){window.localStorage.setItem("dockLayout_save",JSON.stringify(e.info)),t.$store.dispatch("setCurrentLayout","default")}),1e3)},mouseup:function(t){this.ema.fire("dock-mouseup",t)},mousemove:function(t){this.ema.fire("dock-mousemove",t)}}},tt=Q,et=(n("2892"),Object(b["a"])(tt,w,x,!1,null,"2666397c",null)),nt=et.exports,it=(n("fe8a"),n("77bb")),at=n.n(it),ot=Object(r["a"])(Object(r["a"])({rows:Number,prepend:String,append:String},at.a.props),{},{isAlias:Boolean,aliasName:String,placeholder:String,maxlength:Number,minlength:Number}),rt=n("3f00"),st=n.n(rt),lt=Object(r["a"])(Object(r["a"])({value:String,rows:Number},st.a.props),{},{changes:{type:"select",default:"ajax",options:["ajax","alert","jump","blank","click"]},url:{type:String},tips:{type:String},ifValue:{type:String},width:{type:String},height:{type:String},powerUrl:{type:String},oldDataField:{type:String},newDataField:{type:String}}),ct=n("679e"),dt=n.n(ct),ut=Object(r["a"])({button:Boolean},dt.a.props),pt=n("3a6a"),ft=n.n(pt),ht=Object(r["a"])(Object(r["a"])({button:Boolean},ft.a.props),{},{value:Array}),gt=n("25f9"),mt=n.n(gt),bt=Object(r["a"])(Object(r["a"])({},mt.a.props),{},{value:Boolean,note:{type:String,default:""}}),vt=n("ce6c"),yt=n.n(vt),wt=Object(r["a"])(Object(r["a"])({},yt.a.props),{},{note:{type:String,default:""}}),xt=n("cbc6"),kt=n.n(xt),St=Object(r["a"])(Object(r["a"])({},kt.a.mixins[0].props),kt.a.props),jt=n("66d3"),Ot=n.n(jt),Ft=Object(r["a"])(Object(r["a"])(Object(r["a"])({picker:Boolean,start:String,end:String,step:String,minTime:String,maxTime:String,selectableRange:[String,Array]},Ot.a.mixins[0].props),Ot.a.props),{},{isRange:Boolean}),_t=n("ff2d"),Pt=n.n(_t),$t=Object(r["a"])(Object(r["a"])({},Pt.a.props),{},{parentId:String}),Tt=n("107d"),Ct=Object(r["a"])(Object(r["a"])({},Tt["a"].props),{},{contentPosition:{type:"select",options:[{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]}}),Mt=n("041b"),At=n.n(Mt),Dt=Object(r["a"])(Object(r["a"])({},At.a.props),{},{append:String,value:Number}),Et=n("8d78"),Bt=n.n(Et),zt=Object(r["a"])({},Bt.a.props),It=n("b010"),Nt=n.n(It),Lt=Object(r["a"])({},Nt.a.props),Rt=n("3450"),Vt=n.n(Rt),Wt=Object(r["a"])(Object(r["a"])({},Vt.a.props),{},{UploadType:{type:"select",default:"img",options:["img","file","video"]},uploadText:{type:String,default:"点击上传"},selectText:{type:String,default:"选取文件"},submitText:{type:String,default:"上传到服务器"},tipText:{type:String,default:"只能上传jpg/png文件，且不超过500kb"},isPrivate:{type:"select",default:1,options:[{label:"公用空间",value:0},{label:"私有空间",value:1}]},size:String}),qt=Object(r["a"])(Object(r["a"])(Object(r["a"])({},kt.a.mixins[0].props),kt.a.props),{},{dataType:{type:"select",default:"text",options:["number","date","time","text","timePicker"]},minPlaceholder:{type:String,default:"最小值"},maxPlaceholder:{type:String,default:"最大值"},separator:{type:String,default:"-"},separatorWidth:{type:[Number,String],default:12},value:{type:Array,default:function(){return["",""]}}}),Jt={value:{type:Array,default:function(){return[]}},theme:{type:String,default:"",validator:function(t){return["success","info","warning","danger",""].includes(t)}},closable:{type:Boolean,default:!0},addText:{type:String,default:"+ 添加"}},Ut={value:Array,placeholder:String,collapseTags:Boolean,disabled:Boolean,readonly:Boolean,size:String,icon:String},Xt=n("dd58"),Yt=n.n(Xt),Ht=Object(r["a"])({},Yt.a.props),Kt={value:{type:String,default:""},toolbar:{type:[String,Array],default:"classic"},height:{type:String},readonly:{type:Boolean,default:!1}},Zt=n("3d1b"),Gt=Object(r["a"])({},Zt["a"].props),Qt=n("8c54"),te=Object(r["a"])({},Qt["a"].props),ee=Object(r["a"])({rows:Number,prepend:String,append:String},at.a.props),ne={keys:{type:String,default:"63PBZ-NJTCU-AXPVJ-2UXI2-BE6L2-HKB4J"}},ie=Object(r["a"])(Object(r["a"])({rows:Number,prepend:String,append:String},at.a.props),{},{width:String,appenName:String}),ae={value:String,prepend:String,append:String,styles:String},oe=Object(r["a"])(Object(r["a"])({value:{type:String},buttonValue:{type:String,default:function(){return"按钮"}}},st.a.props),{},{append:String,styles:String,changes:{type:"select",default:"ajax",options:["ajax","alert","jump","blank","copy"]},url:{type:String},tips:{type:String},ifValue:{type:String},width:{type:String},height:{type:String}}),re=Object(r["a"])(Object(r["a"])({rows:Number,prepend:String,append:String},at.a.props),{},{isAlias:Boolean,aliasName:String,placeholder:String,maxlength:Number,minlength:Number,value:Array}),se=Object(r["a"])(Object(r["a"])({rows:Number,prepend:String,append:String},at.a.props),{},{isAlias:Boolean,aliasName:String,placeholder:String,maxlength:Number,minlength:Number,value:Array}),le=Object(r["a"])(Object(r["a"])({rows:Number,prepend:String,append:String},at.a.props),{},{isAlias:Boolean,aliasName:String,placeholder:String,maxlength:Number,minlength:Number,value:Array,noteStr:String,appendTow:String,prependTow:String,division:String}),ce={value:Array},de={value:String},ue=n("988a"),pe=n.n(ue),fe=Object(r["a"])(Object(r["a"])({},pe.a.props),{},{styles:{type:String}}),he={input:ot,spec:ce,ercode:de,image:fe,addInput:re,addInputSelect:se,attrInput:le,label:ae,labelButton:oe,button:lt,radio:ut,checkbox:ht,switch:bt,select:wt,date:St,time:Ft,cascader:$t,divider:Ct,number:Dt,rate:zt,slider:Lt,upload:Wt,range:qt,tag:Jt,inputTag:Ut,color:Ht,editor:Kt,tree:Gt,checkTree:te,aliasInput:ee,locationInput:ne,addFieldInput:ie};function ge(t){var e=[];return Object.keys(t).forEach((function(n){var i=t[n];if(!i.type){var a=[Number,String,Boolean,Object,Function,Array];i={type:Array.isArray(i)||a.includes(i)?i:String}}i.type=Array.isArray(i.type)?i.type:[i.type],i.type.includes(String)?e.push({label:n,prop:n,type:"input"}):i.type.includes(Number)?e.push({label:n,prop:n,type:"number",props:{controlsPosition:"right"}}):i.type.includes(Boolean)?e.push({label:n,prop:n,type:"switch",props:{}}):i.type.includes("select")?e.push({label:n,prop:n,type:"select",options:i.options}):"value"===n&&i.type.includes(Array)&&e.push({label:n,prop:n,type:"inputTag",props:{}})})),e}function me(t){var e={};return Object.keys(t).forEach((function(n){e[n]=ge(t[n])})),e}var be=me(he),ve=Object(r["a"])({rows:Number,prepend:String,append:String},at.a.props),ye=Object(r["a"])(Object(r["a"])({},mt.a.props),{},{value:Boolean}),we={value:{type:String,default:function(){return"标签"}},theme:{type:"radio",default:"",options:["success","info","warning","danger"],props:{button:!0},validator:function(t){return["success","info","warning","danger",""].includes(t)}},effect:{type:"radio",default:"light",options:["dark","light","plain"],props:{button:!0}}},xe={theme:{type:String,default:"",validator:function(t){return["success","info","warning","danger",""].includes(t)}},value:String},ke=Object(r["a"])(Object(r["a"])({},pe.a.props),{},{styles:{type:String}}),Se=Object(r["a"])(Object(r["a"])({value:{type:String,default:function(){return"按钮"}}},st.a.props),{},{type:{type:"radio",default:"primary",options:["success","primary","info","warning","danger"],props:{button:!0}},size:{type:"radio",default:"medium",options:["medium","small","mini"],props:{button:!0}},changes:{type:"select",default:"ajax",options:["ajax","alert","jump","blank"]},url:{type:String},tips:{type:String},ifValue:{type:String},width:{type:String},height:{type:String},powerUrl:{type:String}}),je=Object(r["a"])(Object(r["a"])({value:{type:String,default:function(){return"按钮"}}},st.a.props),{},{type:{type:"radio",default:"primary",options:["success","primary","info","warning","danger"],props:{button:!0}},size:{type:"radio",default:"medium",options:["medium","small","mini"],props:{button:!0}},changes:{type:"select",default:"ajax",options:["ajax","alert","jump","blank","click"]},url:{type:String},tips:{type:String,default:"确定要删除此数据吗？删除后将不能恢复哦！"},ifValue:{type:String},width:{type:String},height:{type:String},powerUrl:{type:String}}),Oe=n("60cf"),Fe=n.n(Oe),_e=Object(r["a"])(Object(r["a"])({value:{type:String,default:function(){return"下拉菜单"}}},Fe.a.props),{},{trigger:{type:"radio",default:"hover",options:["click","hover"],props:{button:!0}},size:{type:"radio",default:"medium",options:["medium","small","mini"],props:{button:!0}},type:{type:"radio",default:"",options:["success","info","warning","danger"],props:{button:!0}},placement:{type:"select",default:"bottom-end",options:["top","top-start","top-end","bottom","bottom-start","bottom-end"]}}),Pe={theme:{type:String,default:"",validator:function(t){return["success","info","warning","danger",""].includes(t)}},value:String,format:String},$e={theme:{type:String,default:"",validator:function(t){return["success","info","warning","danger",""].includes(t)}},value:String,format:String},Te=Object(r["a"])(Object(r["a"])({value:{type:String,default:function(){return"按钮1"}}},st.a.props),{},{type:{type:"radio",default:"primary",options:["success","info","warning","danger"],props:{button:!0}},size:{type:"radio",default:"medium",options:["medium","small","mini"],props:{button:!0}},changes:{type:"select",default:"ajax",options:["ajax","alert","jump"]},url:{type:String},tips:{type:String},ifValue:{type:String}}),Ce=Object(r["a"])(Object(r["a"])({},at.a.props),{},{changes:{type:"select",default:"ajax",options:["ajax","alert","jump","blank"]},url:{type:String},ifValue:{type:String},powerUrl:{type:String}}),Me={input:ve,switch:ye,tags:we,label:xe,image:ke,button:Se,buttons:je,dropdown:_e,timeText:Pe,countdown:$e,tagstatus:Te,sort:Ce};function Ae(t){var e=[];return Object.keys(t).forEach((function(n){var i=t[n];if(!i.type){var a=[Number,String,Boolean,Object,Function,Array];i={type:Array.isArray(i)||a.includes(i)?i:String}}i.type=Array.isArray(i.type)?i.type:[i.type],i.type.includes(String)?e.push({label:n,prop:n,type:"input"}):i.type.includes(Number)?e.push({label:n,prop:n,type:"number",props:{controlsPosition:"right"}}):i.type.includes(Boolean)?e.push({label:n,prop:n,type:"switch",props:{}}):i.type.includes("select")?e.push({label:n,prop:n,type:"select",options:i.options}):i.type.includes("radio")?e.push({label:n,prop:n,type:"radio",options:i.options,props:i.props}):"value"===n&&i.type.includes(Array)&&e.push({label:n,prop:n,type:"inputTag",props:{}})})),e}function De(t){var e={};return Object.keys(t).forEach((function(n){e[n]=Ae(t[n])})),e}var Ee=De(Me),Be=(n("8711"),{components:{Myheader:y,UiDock:nt},data:function(){return{model:null,layoutData:null,nodeInfo:null}},props:["active"],computed:Object(r["a"])(Object(r["a"])({},Object(p["c"])({form:function(t){return t.formModel},fields:function(t){return t.fields},currentLayout:function(t){return t.viewOption.currentLayout},demoMode:function(t){return t.setting.demoMode}})),{},{query_types:function(){return this.$route.query.types}}),watch:{nodeInfo:function(t){this.$store.dispatch("user/setNodeinfo",t)},currentLayout:{handler:function(t,e){this.layout(t)},immediate:!0},query_types:{handler:function(t,e){t!=e&&this.initquid()}}},created:function(){window.EMA=window.EMA,this.initquid()},mounted:function(){this.bindEvent(),this.layout(),this.loadPageInfo()},methods:{initquid:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$route.query.id,!n){e.next=6;break}return e.next=4,t.getForms(n);case 4:e.next=8;break;case 6:console.log("-----------------------------"),t.$store.commit("setFields",[{title:"基本配置",id:"0",content:[]}]);case 8:t.$store.commit("setProps",be),t.$store.commit("setTableProps",Ee);case 10:case"end":return e.stop()}}),e)})))()},getForms:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={id:t},n.next=3,Object(f["d"])(i);case 3:a=n.sent,a&&200===a.code?(2==e.query_types?(e.$store.commit("setFields",a.data.info.template_content["searchForm"]||[]),e.$store.commit("setTableFields",a.data.info.template_content["table"]||[]),e.$store.commit("setButtonFields",{list:a.data.info.template_content["leftButton"]||[],type:"left"}),e.$store.commit("setButtonFields",{list:a.data.info.template_content["rightButton"]||[],type:"right"})):e.$store.commit("setFields",a.data.info.template_content||[]),console.log(e.fields,a.data.info),e.$store.commit("addSubFromField",{is_footer:a.data.info.is_footer,ajax_url:a.data.info.ajax_url,alias:a.data.info.alias,index_url:a.data.info.index_url,note:a.data.info.note,id:a.data.info.id,template_type:a.data.info.template_type,title:a.data.info.title,status:a.data.info.status})):e.$store.commit("setFields",[]),e.$store.commit("setProps",be);case 6:case"end":return n.stop()}}),n)})))()},layout:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(null,"8d29",3));case 2:i=e.sent,i=P()(i.default||i),t.layoutData=i;case 5:case"end":return e.stop()}}),e)})))()},loadPageInfo:function(){var t=this,e=u["a"].parseURL(window.location.href);if(console.log(!e.params.key,6666666),e.params.key){var n=this.keys=e.params.key.split("/");1==n.length&&(n[1]=n[0]),Server({url:"editor/pages/editor-detail",method:"post",needLoading:!1,data:{pageKey:n[1],scene:"edit"}}).then((function(e){var n=e.data;t.pageInfo=n.data;var i=null;try{i=JSON.parse(t.pageInfo.content)||{}}catch(a){}t.$store.dispatch("setPageType",t.pageInfo.type),i.canvas&&i.canvas.width&&t.$store.dispatch("SettingChange",{phoneSize:i.canvas}),t.nodeInfo=P()(i),t.$store.dispatch("setUser",{userId:n.data&&n.data.uid})}))}else this.$alert("编辑页面缺少key")},bindEvent:function(){var t,e=this;console.log(window),window.EMA.bind("loading.show",(function(){t=e.$loading({lock:!0,text:"处理中，请稍等",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})})),window.EMA.bind("loading.hide",(function(){t&&t.close()}));window.EMA.bind("selectPageTemplate",(function(t){console.log(t,88888888),t&&Object.assign(e.nodeInfo,P()(t))})),window.EMA.bind("pageInfo.save",(function(t,n){console.log("save---------",e.nodeInfo),e.doSave(e.nodeInfo,!0),e.savePage(t,n)})),window.EMA.bind("commponent.addOne",(function(t){var n=e.nodeInfo;window.$vue&&window.$vue.nodeInfo&&(n=window.$vue.nodeInfo);var i=getBaseNode(t),a=u["a"].componentAddJudge(n,window.$vue||e);if(!a.can)return e.$alert(a.msg);/pageContainer$/i.test(n.type)&&(i.forceStyle={position:"absolute",width:"100%",height:"100%",left:"0",top:"0"}),n.child||e.$set(n,"child",[]),n.child.push(i)})),window.document.addEventListener("keydown",(function(t){var e=t.keyCode;switch(e){case 38:window.EMA.fire("arrowup.down",t);break;case 40:window.EMA.fire("arrowdown.down",t);break;case 37:window.EMA.fire("arrowleft.down",t);break;case 39:window.EMA.fire("arrowright.down",t);break;case 8:window.EMA.fire("delete.down",t);case 46:window.EMA.fire("delete.down",t);break;case 18:window.EMA.fire("alt.down",t);break;case 16:window.EMA.fire("shift.down",t);break}})),window.document.addEventListener("keyup",(function(t){var e=t.keyCode;switch(e){case 8:case 46:window.EMA.fire("delete.up",t);break;case 18:window.EMA.fire("alt.up",t);break;case 16:window.EMA.fire("shift.up",t);break;case 70:t.ctrlKey&&t.shiftKey&&(window.EMA.fire("ctrl.shift.f.up",t),t.preventDefault());break}}))}}}),ze=Be,Ie=(n("30fd"),Object(b["a"])(ze,i,a,!1,null,null,null));e["default"]=Ie.exports},6973:function(t,e,n){var i=n("82d7"),a=n("7de4"),o=NaN,r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;function u(t){if("number"==typeof t)return t;if(a(t))return o;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=l.test(t);return n||c.test(t)?d(t.slice(2),n?2:8):s.test(t)?o:+t}t.exports=u},"708e":function(t,e,n){var i=n("edd1"),a=n("82d7"),o="Expected a function";function r(t,e,n){var r=!0,s=!0;if("function"!=typeof t)throw new TypeError(o);return a(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),i(t,e,{leading:r,maxWait:e,trailing:s})}t.exports=r},"7de4":function(t,e,n){var i=n("9822"),a=n("4923"),o="[object Symbol]";function r(t){return"symbol"==typeof t||a(t)&&i(t)==o}t.exports=r},"8d29":function(t){t.exports=JSON.parse('{"layout":{"children":[{"children":[{"children":[{"name":"组件列表","component":"widgetComponent","close":true,"pop":true},{"name":"组合组件","component":"widgetCombinedComponents","close":true,"pop":true}],"type":"panel","flex":0.5},{"children":[{"name":"组件树","component":"widgetComponentTree","close":true,"pop":true}],"type":"panel","flex":0.5}],"type":"column","flex":0.20626959247648904},{"children":[{"children":[{"name":"场景","component":"widgetScene","close":false,"pop":false,"type":1}],"type":"panel","flex":1}],"type":"column","flex":0.5512481056767048},{"children":[{"children":[{"name":"属性","component":"widgetAttribute","close":false,"pop":false}],"type":"panel","flex":1}],"type":"column","flex":0.2424823018468062}],"type":"row"},"dialogs":[],"version":1.3,"name":"default"}')},ad95:function(t,e,n){"use strict";var i=n("dc01"),a=n.n(i);a.a},aeb8:function(t,e,n){},b89e:function(t,e,n){},bd3b:function(t,e,n){},bf06:function(t,e,n){},bf9a:function(t,e,n){},c088:function(t,e,n){},dc01:function(t,e,n){},e438:function(t,e,n){"use strict";var i=n("aeb8"),a=n.n(i);a.a},edd1:function(t,e,n){var i=n("82d7"),a=n("3804"),o=n("6973"),r="Expected a function",s=Math.max,l=Math.min;function c(t,e,n){var c,d,u,p,f,h,g=0,m=!1,b=!1,v=!0;if("function"!=typeof t)throw new TypeError(r);function y(e){var n=c,i=d;return c=d=void 0,g=e,p=t.apply(i,n),p}function w(t){return g=t,f=setTimeout(S,e),m?y(t):p}function x(t){var n=t-h,i=t-g,a=e-n;return b?l(a,u-i):a}function k(t){var n=t-h,i=t-g;return void 0===h||n>=e||n<0||b&&i>=u}function S(){var t=a();if(k(t))return j(t);f=setTimeout(S,x(t))}function j(t){return f=void 0,v&&c?y(t):(c=d=void 0,p)}function O(){void 0!==f&&clearTimeout(f),g=0,c=h=d=f=void 0}function F(){return void 0===f?p:j(a())}function _(){var t=a(),n=k(t);if(c=arguments,d=this,h=t,n){if(void 0===f)return w(h);if(b)return clearTimeout(f),f=setTimeout(S,e),y(h)}return void 0===f&&(f=setTimeout(S,e)),p}return e=o(e)||0,i(n)&&(m=!!n.leading,b="maxWait"in n,u=b?s(o(n.maxWait)||0,e):u,v="trailing"in n?!!n.trailing:v),_.cancel=O,_.flush=F,_}t.exports=c},f24d:function(t,e,n){"use strict";var i=n("18a9"),a=n.n(i);a.a}}]);